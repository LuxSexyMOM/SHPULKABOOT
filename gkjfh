-- Delta Executor: CallieStarPets(5+) Draggable Menu
-- Сохранить как: calliestarpets_delta.lua

local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local Player = Players.LocalPlayer

-- Создаем перемещаемую менюшку
local ScreenGui = Instance.new("ScreenGui")
if syn and syn.protect_gui then
    syn.protect_gui(ScreenGui)
elseif gethui then
    ScreenGui.Parent = gethui()
else
    ScreenGui.Parent = game.CoreGui
end

local MainFrame = Instance.new("Frame")
local TitleFrame = Instance.new("Frame")
local TitleText = Instance.new("TextLabel")
local CloseButton = Instance.new("TextButton")
local ContentFrame = Instance.new("ScrollingFrame")

-- Настройка основного окна
ScreenGui.Name = "CallieStarPetsMenu"
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 300, 0, 200)
MainFrame.Position = UDim2.new(0, 50, 0, 50)
MainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
MainFrame.BorderSizePixel = 0
MainFrame.ClipsDescendants = true
MainFrame.Parent = ScreenGui

-- Скругление углов
local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 8)
UICorner.Parent = MainFrame

-- Тень
local DropShadow = Instance.new("ImageLabel")
DropShadow.Name = "DropShadow"
DropShadow.Size = MainFrame.Size + UDim2.new(0, 10, 0, 10)
DropShadow.Position = MainFrame.Position - UDim2.new(0, 5, 0, 5)
DropShadow.BackgroundTransparency = 1
DropShadow.Image = "rbxassetid://5234383229"
DropShadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
DropShadow.ImageTransparency = 0.5
DropShadow.ScaleType = Enum.ScaleType.Slice
DropShadow.SliceCenter = Rect.new(20, 20, 280, 280)
DropShadow.Parent = ScreenGui

-- Заголовок
TitleFrame.Name = "TitleFrame"
TitleFrame.Size = UDim2.new(1, 0, 0, 40)
TitleFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
TitleFrame.BorderSizePixel = 0
TitleFrame.Parent = MainFrame

TitleText.Name = "TitleText"
TitleText.Size = UDim2.new(0.8, 0, 1, 0)
TitleText.Position = UDim2.new(0, 10, 0, 0)
TitleText.BackgroundTransparency = 1
TitleText.Text = "CallieStarPets(5+)"
TitleText.TextColor3 = Color3.fromRGB(100, 200, 255)
TitleText.Font = Enum.Font.GothamBold
TitleText.TextSize = 18
TitleText.TextXAlignment = Enum.TextXAlignment.Left
TitleText.Parent = TitleFrame

-- Кнопка закрытия
CloseButton.Name = "CloseButton"
CloseButton.Size = UDim2.new(0, 30, 1, 0)
CloseButton.Position = UDim2.new(1, -30, 0, 0)
CloseButton.BackgroundColor3 = Color3.fromRGB(200, 60, 60)
CloseButton.BorderSizePixel = 0
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.Font = Enum.Font.GothamBold
CloseButton.TextSize = 14
CloseButton.Parent = TitleFrame

-- Контент
ContentFrame.Name = "ContentFrame"
ContentFrame.Size = UDim2.new(1, -20, 1, -60)
ContentFrame.Position = UDim2.new(0, 10, 0, 50)
ContentFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
ContentFrame.BorderSizePixel = 0
ContentFrame.ScrollBarThickness = 5
ContentFrame.ScrollBarImageColor3 = Color3.fromRGB(100, 150, 200)
ContentFrame.Parent = MainFrame

-- Контейнер для кнопок
local ButtonContainer = Instance.new("UIListLayout")
ButtonContainer.Padding = UDim.new(0, 5)
ButtonContainer.HorizontalAlignment = Enum.HorizontalAlignment.Center
ButtonContainer.SortOrder = Enum.SortOrder.LayoutOrder
ButtonContainer.Parent = ContentFrame

-- Создаем кнопки
local buttons = {
    {Name = "Noclip", Color = Color3.fromRGB(70, 150, 70), Function = function()
        local char = Player.Character
        if char then
            for _, part in pairs(char:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
            print("Noclip: ON")
        end
    end},
    
    {Name = "Fly", Color = Color3.fromRGB(150, 70, 70), Function = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/XNEOFF/FlyGuiV3/main/FlyGuiV3.txt"))()
    end},
    
    {Name = "Speed x2", Color = Color3.fromRGB(70, 70, 150), Function = function()
        local char = Player.Character
        if char and char:FindFirstChildOfClass("Humanoid") then
            char:FindFirstChildOfClass("Humanoid").WalkSpeed = 32
            print("Speed: 32")
        end
    end},
    
    {Name = "TP to Base", Color = Color3.fromRGB(150, 150, 70), Function = function()
        local char = Player.Character
        if char and char:FindFirstChild("HumanoidRootPart") then
            char.HumanoidRootPart.CFrame = CFrame.new(0, 100, 0)
        end
    end},
    
    {Name = "Inf Jump", Color = Color3.fromRGB(150, 70, 150), Function = function()
        getgenv().InfiniteJumpEnabled = true
        game:GetService("UserInputService").JumpRequest:connect(function()
            if getgenv().InfiniteJumpEnabled then
                Player.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
            end
        end)
        print("Inf Jump: ON")
    end},
}

-- Добавляем кнопки
for i, btnInfo in ipairs(buttons) do
    local button = Instance.new("TextButton")
    button.Name = btnInfo.Name
    button.Size = UDim2.new(0.9, 0, 0, 35)
    button.BackgroundColor3 = btnInfo.Color
    button.BorderSizePixel = 0
    button.Text = btnInfo.Name
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.Font = Enum.Font.Gotham
    button.TextSize = 14
    button.LayoutOrder = i
    
    -- Эффект при наведении
    button.MouseEnter:Connect(function()
        button.BackgroundColor3 = btnInfo.Color * 1.2
    end)
    
    button.MouseLeave:Connect(function()
        button.BackgroundColor3 = btnInfo.Color
    end)
    
    -- Функция кнопки
    button.MouseButton1Click:Connect(function()
        pcall(btnInfo.Function)
    end)
    
    button.Parent = ContentFrame
end

-- Логика перемещения окна
local dragging = false
local dragInput
local dragStart
local startPos

local function update(input)
    local delta = input.Position - dragStart
    MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    DropShadow.Position = MainFrame.Position - UDim2.new(0, 5, 0, 5)
end

-- Обработка перемещения
TitleFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

TitleFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        update(input)
    end
end)

-- Кнопка закрытия
CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

-- Горячие клавиши
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if not gameProcessed then
        if input.KeyCode == Enum.KeyCode.RightShift then
            MainFrame.Visible = not MainFrame.Visible
            DropShadow.Visible = MainFrame.Visible
        elseif input.KeyCode == Enum.KeyCode.Delete then
            ScreenGui:Destroy()
        end
    end
end)

-- Адаптивный размер контента
local function updateContentSize()
    local totalHeight = 0
    for _, child in pairs(ContentFrame:GetChildren()) do
        if child:IsA("GuiObject") then
            totalHeight = totalHeight + child.Size.Y.Offset + ButtonContainer.Padding.Offset
        end
    end
    ContentFrame.CanvasSize = UDim2.new(0, 0, 0, totalHeight)
end

-- Обновляем размер при изменении
ContentFrame.ChildAdded:Connect(updateContentSize)
ContentFrame.ChildRemoved:Connect(updateContentSize)
updateContentSize()

print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")
print("   CallieStarPets(5+) Menu")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")
print("RightShift - Show/Hide Menu")
print("Delete - Destroy Menu")
print("Drag - Move window")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")
